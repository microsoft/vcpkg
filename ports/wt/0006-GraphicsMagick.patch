diff --git a/CMakeLists.txt b/CMakeLists.txt
index 7466193..5826718 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -374,9 +374,9 @@ SET(WT_WRASTERIMAGE_IMPLEMENTATION ${WT_WRASTERIMAGE_DEFAULT_IMPLEMENTATION} CAC
 SET_PROPERTY(CACHE WT_WRASTERIMAGE_IMPLEMENTATION PROPERTY STRINGS GraphicsMagick Direct2D none)

 IF (${WT_WRASTERIMAGE_IMPLEMENTATION} STREQUAL "GraphicsMagick")
-  IF (NOT GM_FOUND)
+  IF (0)
     MESSAGE(FATAL_ERROR "WT_WRASTERIMAGE_IMPLEMENTATION set to GraphicsMagick but GM is not found. Indicate the location of your graphicsmagick library using -DGM_PREFIX=...")
-  ENDIF (NOT GM_FOUND)
+  ENDIF ()
   SET(WT_HAS_WRASTERIMAGE true)
 ELSEIF (${WT_WRASTERIMAGE_IMPLEMENTATION} STREQUAL "Direct2D")
   IF (WIN32)
diff --git a/src/CMakeLists.txt b/src/CMakeLists.txt
index f22e7eb..6565e9e 100644
--- a/src/CMakeLists.txt
+++ b/src/CMakeLists.txt
@@ -663,8 +663,10 @@ else()
 endif()

 IF("${WT_WRASTERIMAGE_IMPLEMENTATION}" STREQUAL "GraphicsMagick")
-  TARGET_LINK_LIBRARIES(wt PRIVATE ${GM_LIBRARIES})
-  INCLUDE_DIRECTORIES(${GM_INCLUDE_DIRS})
+  find_package(PkgConfig)
+  pkg_check_modules(GRAPHICSMAGICK REQUIRED GraphicsMagick)
+  target_include_directories(wt PRIVATE ${GRAPHICSMAGICK_INCLUDE_DIRS})
+  target_link_libraries(wt PRIVATE ${GRAPHICSMAGICK_LINK_LIBRARIES})
   ADD_DEFINITIONS(-DHAVE_GRAPHICSMAGICK)
 ELSEIF("${WT_WRASTERIMAGE_IMPLEMENTATION}" STREQUAL "Direct2D")
   TARGET_LINK_LIBRARIES(wt PRIVATE d2d1 dwrite windowscodecs shlwapi)
