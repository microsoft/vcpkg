diff --git a/src/appl/gss-sample/gss-client.c b/src/appl/gss-sample/gss-client.c
index 6e2aa33690..0686be9570 100644
--- a/src/appl/gss-sample/gss-client.c
+++ b/src/appl/gss-sample/gss-client.c
@@ -690,7 +690,7 @@ parse_oid(char *mechanism, gss_OID * oid)
 static int max_threads = 1;
 
 #ifdef _WIN32
-static  thread_count = 0;
+static int thread_count = 0;
 static HANDLE hMutex = NULL;
 static HANDLE hEvent = NULL;
 
diff --git a/src/appl/gss-sample/gss-server.c b/src/appl/gss-sample/gss-server.c
index 9b6ce9ffb3..8336682f66 100644
--- a/src/appl/gss-sample/gss-server.c
+++ b/src/appl/gss-sample/gss-server.c
@@ -574,7 +574,7 @@ sign_server(int s, gss_cred_id_t server_creds, int export)
 static int max_threads = 1;
 
 #ifdef _WIN32
-static  thread_count = 0;
+static int thread_count = 0;
 static HANDLE hMutex = NULL;
 static HANDLE hEvent = NULL;
 
diff --git a/src/ccapi/lib/win/ccs_reply_proc.c b/src/ccapi/lib/win/ccs_reply_proc.c
index b4dbc0d19f..9cb166ca82 100644
--- a/src/ccapi/lib/win/ccs_reply_proc.c
+++ b/src/ccapi/lib/win/ccs_reply_proc.c
@@ -36,11 +36,11 @@
 
 void ccs_rpc_request_reply(
     const long  rpcmsg,         /* Message type */
-    const char  tspHandle[],    /* Client's tspdata* */
-    const char* uuid,           /* uuid for making thread-specific event name */
+    const unsigned char  tspHandle[],    /* Client's tspdata* */
+    const unsigned char* uuid,           /* uuid for making thread-specific event name */
     const long  srvStartTime,   /* Server Start Time */
     const long  cbIn,           /* Length of buffer */
-    const char* chIn,           /* Data buffer */
+    const unsigned char* chIn,           /* Data buffer */
     long*       ret_status ) {  /* Return code */
 
     HANDLE          hEvent  = openThreadEvent(uuid, REPLY_SUFFIX);
@@ -68,8 +68,8 @@ void ccs_rpc_request_reply(
 
 void ccs_rpc_connect_reply(
     const long  rpcmsg,         /* Message type */
-    const char  tspHandle[],    /* Client's tspdata* */
-    const char* uuid,           /* uuid for making thread-specific event name */
+    const unsigned char  tspHandle[],    /* Client's tspdata* */
+    const unsigned char* uuid,           /* uuid for making thread-specific event name */
     const long  srvStartTime,   /* Server Start Time */
     long*       status ) {      /* Return code */
 
diff --git a/src/ccapi/server/win/ccs_request_proc.c b/src/ccapi/server/win/ccs_request_proc.c
index c0328ea7ea..d7ad3ec257 100644
--- a/src/ccapi/server/win/ccs_request_proc.c
+++ b/src/ccapi/server/win/ccs_request_proc.c
@@ -34,10 +34,10 @@
 
 void ccs_rpc_request(
     const long  rpcmsg,             /* Message type */
-    const char  tspHandle[],        /* Client's tspdata* */
-    const char* pszUUID,            /* Where client will listen for the reply */
+    const unsigned char  tspHandle[],        /* Client's tspdata* */
+    const unsigned char* pszUUID,            /* Where client will listen for the reply */
     const long  lenRequest,         /* Length of buffer */
-    const char  pbRequest[],        /* Data buffer */
+    const unsigned char  pbRequest[],        /* Data buffer */
     const long  serverStartTime,    /* Which server session we're talking to */
     long*       return_status ) {   /* Return code */
 
@@ -64,8 +64,8 @@ void ccs_rpc_request(
 
 void ccs_rpc_connect(
     const long  rpcmsg,             /* Message type */
-    const char  tspHandle[],        /* Client's tspdata* */
-    const char* pszUUID,            /* Data buffer */
+    const unsigned char  tspHandle[],        /* Client's tspdata* */
+    const unsigned char* pszUUID,            /* Data buffer */
     long*       return_status ) {   /* Return code */
 
     UINT64*     p       = (UINT64*)(tspHandle);
diff --git a/src/clients/kcpytkt/kcpytkt.c b/src/clients/kcpytkt/kcpytkt.c
index 0b8802261e..2865205c13 100644
--- a/src/clients/kcpytkt/kcpytkt.c
+++ b/src/clients/kcpytkt/kcpytkt.c
@@ -18,7 +18,7 @@ xusage()
 }
 
 static void
-do_kcpytkt(int argc, char *argv[], char *fromccachestr, char *etypestr,
+do_kcpytkt(int argc, char *argv[], const char *fromccachestr, char *etypestr,
            int flags);
 
 int
diff --git a/src/clients/kdeltkt/kdeltkt.c b/src/clients/kdeltkt/kdeltkt.c
index cd0bf637db..d130acb226 100644
--- a/src/clients/kdeltkt/kdeltkt.c
+++ b/src/clients/kdeltkt/kdeltkt.c
@@ -18,7 +18,7 @@ xusage()
 }
 
 static void
-do_kdeltkt(int argc, char *argv[], char *ccachestr, char *etypestr, int flags);
+do_kdeltkt(int argc, char *argv[], const char *ccachestr, char *etypestr, int flags);
 
 int
 main(int argc, char *argv[])
diff --git a/src/config/win-pre.in b/src/config/win-pre.in
index 8ac5fa2f86..c9eb63221a 100644
--- a/src/config/win-pre.in
+++ b/src/config/win-pre.in
@@ -114,7 +114,7 @@ KFWFLAGS=-DUSE_LEASH=1 -DDEBUG -D_CRTDBG_MAP_ALLOC
 #
 # The name of the C compiler for the target
 #
-CC=cl
+CC=$(CC)
 
 PDB_OPTS=-Fd$(OUTPRE)\ -FD
 CPPFLAGS=-I$(top_srcdir)\include -I$(top_srcdir)\include\krb5 $(DNSFLAGS) -DWIN32_LEAN_AND_MEAN -DKRB5_DEPRECATED=1 -DKRB5_PRIVATE -D_CRT_SECURE_NO_DEPRECATE $(KFWFLAGS) $(TIME_T_FLAGS)
diff --git a/src/lib/gssapi/krb5/acquire_cred.c b/src/lib/gssapi/krb5/acquire_cred.c
index 006eba114d..77305aa872 100644
--- a/src/lib/gssapi/krb5/acquire_cred.c
+++ b/src/lib/gssapi/krb5/acquire_cred.c
@@ -261,7 +261,7 @@ get_ccache_leash(krb5_context context, krb5_principal desired_princ,
     if (hLeashDLL == INVALID_HANDLE_VALUE) {
         hLeashDLL = LoadLibrary(LEASH_DLL);
         if (hLeashDLL != INVALID_HANDLE_VALUE) {
-            (FARPROC) pLeash_AcquireInitialTicketsIfNeeded =
+            pLeash_AcquireInitialTicketsIfNeeded = (void*)
                 GetProcAddress(hLeashDLL, "not_an_API_Leash_AcquireInitialTicketsIfNeeded");
         }
     }
diff --git a/src/lib/krb5/ccache/ccdefault.c b/src/lib/krb5/ccache/ccdefault.c
index 1d3625c4d9..5904d9b758 100644
--- a/src/lib/krb5/ccache/ccdefault.c
+++ b/src/lib/krb5/ccache/ccdefault.c
@@ -76,7 +76,7 @@ krb5int_cc_default(krb5_context context, krb5_ccache *ccache)
     if ( hLeashDLL == INVALID_HANDLE_VALUE ) {
         hLeashDLL = LoadLibrary(LEASH_DLL);
         if ( hLeashDLL != INVALID_HANDLE_VALUE ) {
-            (FARPROC) pLeash_AcquireInitialTicketsIfNeeded =
+            pLeash_AcquireInitialTicketsIfNeeded = (void *)
                 GetProcAddress(hLeashDLL, "not_an_API_Leash_AcquireInitialTicketsIfNeeded");
         }
     }
diff --git a/src/lib/krb5/os/read_pwd.c b/src/lib/krb5/os/read_pwd.c
index 4a5337f3f2..8c68efc2a3 100644
--- a/src/lib/krb5/os/read_pwd.c
+++ b/src/lib/krb5/os/read_pwd.c
@@ -199,7 +199,7 @@ cleanup:
 }
 #endif
 
-static int CALLBACK
+static INT_PTR CALLBACK
 read_pwd_proc(HWND hdlg, UINT msg, WPARAM wParam, LPARAM lParam)
 {
     pwd_params *dp;
@@ -243,7 +243,7 @@ krb5_read_password(context, prompt, prompt2, return_pwd, size_return)
     const char *prompt;
     const char *prompt2;
     char *return_pwd;
-    int *size_return;
+    unsigned int *size_return;
 {
     DLGPROC dlgproc;
     HINSTANCE hinst;
diff --git a/src/util/et/et_h.awk b/src/util/et/et_h.awk
index 95940d1b3b..6bbcd17a5a 100644
--- a/src/util/et/et_h.awk
+++ b/src/util/et/et_h.awk
@@ -145,7 +145,12 @@ END {
 	}
 	print "#define ERROR_TABLE_BASE_" table_name " (" base ")" > outfile
 	print "" > outfile
-	print "extern const struct error_table et_" table_name "_error_table;" > outfile
+	print "#ifdef __cplusplus" > outfile
+	print "extern \"C\"" > outfile
+	print "#else" > outfile
+	print "extern" > outfile
+	print "#endif" > outfile
+	print "const struct error_table et_" table_name "_error_table;" > outfile
 	print "" > outfile
 	print "#if !defined(_WIN32)" > outfile
 	print "/* for compatibility with older versions... */" > outfile
diff --git a/src/util/support/gettimeofday.c b/src/util/support/gettimeofday.c
index 8d8fcd84f5..f14f4c2eb7 100644
--- a/src/util/support/gettimeofday.c
+++ b/src/util/support/gettimeofday.c
@@ -56,12 +56,14 @@
  * SUCH DAMAGE.
  */
 
+#ifdef _WIN32
+#include <winsock2.h>
+#endif
+
 #include "k5-platform.h"
 
 #ifdef _WIN32
 
-#include <winsock2.h>
-
 int
 krb5int_gettimeofday (struct timeval *tp, void *ignore)
 {
diff --git a/src/windows/kfwlogon/kfwlogon.h b/src/windows/kfwlogon/kfwlogon.h
index 622d5665c6..c9f9ca66f4 100644
--- a/src/windows/kfwlogon/kfwlogon.h
+++ b/src/windows/kfwlogon/kfwlogon.h
@@ -47,7 +47,7 @@ SOFTWARE.
 #include <tchar.h>
 #include <strsafe.h>
 
-typedef int errcode_t;
+typedef long errcode_t;
 
 #include <loadfuncs-lsa.h>
 #include <krb5.h>
diff --git a/src/windows/ms2mit/mit2ms.c b/src/windows/ms2mit/mit2ms.c
index 24153cec99..85a7833732 100644
--- a/src/windows/ms2mit/mit2ms.c
+++ b/src/windows/ms2mit/mit2ms.c
@@ -37,7 +37,7 @@ xusage(void)
     exit(1);
 }
 
-void
+int
 main(
     int argc,
     char *argv[]
