diff --git a/CMakeLists.txt b/CMakeLists.txt
index 0cba6f626b..fa497f2b70 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -1309,6 +1309,12 @@ endif()
 
 option(USE_LIBRTMP "Enable librtmp from rtmpdump" OFF)
 if(USE_LIBRTMP)
+  find_package(PkgConfig REQUIRED)
+  pkg_check_modules(LIBRTMP REQUIRED librtmp)
+  include_directories(SYSTEM ${LIBRTMP_INCLUDE_DIRECTORIES})
+  list(APPEND CURL_LIBS ${LIBRTMP_LINK_LIBRARIES})
+  list(APPEND LIBCURL_PC_REQUIRES_PRIVATE rtmp)
+elseif(0)
   set(_extra_libs "rtmp")
   if(WIN32)
     list(APPEND _extra_libs "winmm")
