diff --git a/ecal/core/CMakeLists.txt b/ecal/core/CMakeLists.txt
index 17c32c6..6632117 100644
--- a/ecal/core/CMakeLists.txt
+++ b/ecal/core/CMakeLists.txt
@@ -622,11 +622,15 @@ set(ecal_generated_sources
     ${CMAKE_CURRENT_BINARY_DIR}/src/git_version.h
 )
 
-ecal_add_shared_library(${TARGET_NAME}
+ecal_add_library(${TARGET_NAME}
     ${ecal_sources}
     ${ecal_generated_sources}
 )
 
+if(BUILD_SHARED_LIBS)
+  target_compile_definitions(${TARGET_NAME}   PUBLIC eCAL_SHARED_LIB)
+endif()
+
 if (ECAL_CORE_CONFIGURATION)
   target_compile_definitions(${TARGET_NAME} PRIVATE ECAL_CORE_CONFIGURATION)
 endif()
@@ -697,10 +701,9 @@ if(ECAL_CORE_COMMAND_LINE)
 endif()
 
 if(ECAL_CORE_SERVICE)
-  target_link_libraries(${TARGET_NAME}
-    PRIVATE
-      ecal_service
-  )
+  # fix install(EXPORT "eCALCoreTargets" ...) includes target "core" which requires target "ecal_service" that is not in any export set
+  target_sources(${TARGET_NAME} PRIVATE $<TARGET_OBJECTS:ecal_service>)
+  target_include_directories(${TARGET_NAME} PRIVATE $<TARGET_PROPERTY:ecal_service,INTERFACE_INCLUDE_DIRECTORIES>)
 endif()
 
 if(ECAL_CORE_TRANSPORT_TCP)
@@ -748,7 +751,7 @@ target_compile_features(${TARGET_NAME} PUBLIC cxx_std_14)
 
 set_property(TARGET ${TARGET_NAME}   PROPERTY FOLDER core)
 
-ecal_install_shared_library(${TARGET_NAME})
+ecal_install_library(${TARGET_NAME})
 
 if(NOT ${CMAKE_VERSION} VERSION_LESS "3.8.0") 
   source_group(TREE "${CMAKE_CURRENT_SOURCE_DIR}" FILES 
diff --git a/ecal/core/include/ecal/os.h b/ecal/core/include/ecal/os.h
index 3a1325c..4d080a7 100644
--- a/ecal/core/include/ecal/os.h
+++ b/ecal/core/include/ecal/os.h
@@ -48,10 +48,14 @@
 #endif
 
 #ifdef _MSC_VER
-  #ifdef ECAL_CORE_EXPORTS
-    #define ECAL_API __declspec(dllexport)
-  #elif defined(ECAL_CORE_IMPORTS)
-    #define ECAL_API __declspec(dllimport)
+  #ifdef eCAL_SHARED_LIB
+    #ifdef ECAL_CORE_EXPORTS
+      #define ECAL_API __declspec(dllexport)
+    #elif defined(ECAL_CORE_IMPORTS)
+      #define ECAL_API __declspec(dllimport)
+    #else
+      #define ECAL_API
+    #endif
   #else 
     #define ECAL_API
   #endif
diff --git a/lang/c/core/CMakeLists.txt b/lang/c/core/CMakeLists.txt
index 2559348..c586711 100644
--- a/lang/c/core/CMakeLists.txt
+++ b/lang/c/core/CMakeLists.txt
@@ -102,7 +102,7 @@ set(ecal_c_sources
     ${ecal_header_cimpl}
 )
 
-ecal_add_shared_library(${PROJECT_NAME}
+ecal_add_library(${PROJECT_NAME}
     ${ecal_c_sources}
 )
 
