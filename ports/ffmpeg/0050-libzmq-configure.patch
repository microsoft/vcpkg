diff --git a/configure b/configure
index 98b582a5d5..83e26b1e9e 100755
--- a/configure
+++ b/configure
@@ -7075,7 +7075,21 @@ enabled libxevd           && require_pkg_config libxevd "xevd >= 0.4.1" "xevd.h"
 enabled libxeve           && require_pkg_config libxeve "xeve >= 0.5.1" "xeve.h" xeve_encode
 enabled libxvid           && require libxvid xvid.h xvid_global -lxvidcore
 enabled libzimg           && require_pkg_config libzimg "zimg >= 2.7.0" zimg.h zimg_get_api_version
-enabled libzmq            && require_pkg_config libzmq "libzmq >= 4.2.1" zmq.h zmq_ctx_new
+enabled libzmq            && {
+    case $target_os in
+        mingw*|msys*|win32)
+            check_headers zmq.h || die "zmq.h not found"
+            libzmq_extralibs="-lzmq"
+            avformat_extralibs="$avformat_extralibs libzmq_extralibs"
+            ;;
+        *)
+            check_pkg_config libzmq "libzmq >= 4.2.1" zmq.h zmq_ctx_new ||
+                die "libzmq not found using pkg-config"
+            libzmq_extralibs="$libzmq_libs"
+            avformat_extralibs="$avformat_extralibs libzmq_extralibs"
+            ;;
+    esac
+}
 enabled libzvbi           && require_pkg_config libzvbi zvbi-0.2 libzvbi.h vbi_decoder_new &&
                              { test_cpp_condition libzvbi.h "VBI_VERSION_MAJOR > 0 || VBI_VERSION_MINOR > 2 || VBI_VERSION_MINOR == 2 && VBI_VERSION_MICRO >= 28" ||
                                enabled gpl || die "ERROR: libzvbi requires version 0.2.28 or --enable-gpl."; }
