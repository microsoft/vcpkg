_find_package(BLAS) # Find BLAS before setting BLA_VENDOR (Will set/unset BLA_VENDOR itself)
set(BLA_VENDOR @BLA_VENDOR@)
set(BLA_STATIC @BLA_STATIC@)
_find_package(${ARGS})
message(STATUS "Input BLAS_LIBRARIES:${BLAS_LIBRARIES}")
list(FIND BLAS_LIBRARIES "-Wl,--start-group" start_group)
while(NOT "${start_group}" EQUAL "-1")
    list(FIND BLAS_LIBRARIES "-Wl,--end-group" end_group)
    math(EXPR group_length "${end_group}-${start_group}+1")
    list(SUBLIST BLAS_LIBRARIES "${start_group}" "${group_length}" group_list)
    set(ind_to_remove "")
    foreach(group_index RANGE "${start_group}" "${end_group}")
        list(APPEND ind_to_remove ${group_index})
    endforeach()
    list(REMOVE_AT BLAS_LIBRARIES ${ind_to_remove})
    message(STATUS "Removed BLAS_LIBRARIES:${BLAS_LIBRARIES}")
    message(STATUS "group_list:${group_list}")
    list(JOIN group_list "," group_string)
    string(REPLACE "-Wl,--start-group," "$<LINK_GROUP:RESCAN," group_string "${group_string}")
    string(REPLACE ",-Wl,--end-group" ">" group_string "${group_string}")
    message(STATUS "group_string:${group_string}")

    list(INSERT BLAS_LIBRARIES "${start_group}" "${group_string}")
    list(FIND BLAS_LIBRARIES "-Wl,--start-group" start_group)
    message(STATUS "Output BLAS_LIBRARIES:${BLAS_LIBRARIES}")
endwhile()
message(STATUS "Output BLAS_LIBRARIES:${BLAS_LIBRARIES}")
unset(BLA_VENDOR)
unset(BLA_STATIC)