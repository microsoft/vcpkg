diff --git a/libfprint/fpi-device.c b/libfprint/fpi-device.c
index a1be30c..8778339 100644
--- a/libfprint/fpi-device.c
+++ b/libfprint/fpi-device.c
@@ -1730,7 +1730,9 @@ fpi_device_configure_wakeup (FpDevice *device, gboolean enabled)
             g_string_prepend (ports, port_str);
             g_set_object (&dev, parent);
           }
-        g_string_set_size (ports, ports->len - 1);
+
+        if (ports->len > 0)
+            g_string_set_size (ports, ports->len - 1);
 
         sysfs_wakeup = g_strdup_printf ("/sys/bus/usb/devices/%d-%s/power/wakeup", bus, ports->str);
         res = update_attr (sysfs_wakeup, wakeup_command);

