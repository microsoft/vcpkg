diff --git a/SMP/libhogweed.vcxproj b/SMP/libhogweed.vcxproj
index 976d9fc..5fd42ba 100644
--- a/SMP/libhogweed.vcxproj
+++ b/SMP/libhogweed.vcxproj
@@ -18,7 +18,7 @@
       <DisableSpecificWarnings>4146;4267;4028;4244;%(DisableSpecificWarnings)</DisableSpecificWarnings>
     </ClCompile>
     <Lib>
-      <AdditionalDependencies>libnettled.lib;%(AdditionalDependencies)</AdditionalDependencies>
+      <AdditionalDependencies>nettled.lib;%(AdditionalDependencies)</AdditionalDependencies>
       <AdditionalOptions>/IGNORE:4006,4221,4078 %(AdditionalOptions)</AdditionalOptions>
     </Lib>
     <PostBuildEvent>
@@ -132,7 +132,7 @@ del /f /q $(OutDir)\licenses\nettle.txt
       <DisableSpecificWarnings>4146;4267;4028;4244;%(DisableSpecificWarnings)</DisableSpecificWarnings>
     </ClCompile>
     <Lib>
-      <AdditionalDependencies>libnettled.lib;%(AdditionalDependencies)</AdditionalDependencies>
+      <AdditionalDependencies>nettled.lib;%(AdditionalDependencies)</AdditionalDependencies>
       <AdditionalOptions>/IGNORE:4006,4221,4078 %(AdditionalOptions)</AdditionalOptions>
     </Lib>
     <PostBuildEvent>
@@ -476,7 +476,7 @@ del /f /q $(OutDir)\licenses\nettle.txt
       <DisableSpecificWarnings>4146;4267;4028;4244;%(DisableSpecificWarnings)</DisableSpecificWarnings>
     </ClCompile>
     <Lib>
-      <AdditionalDependencies>libnettle.lib;%(AdditionalDependencies)</AdditionalDependencies>
+      <AdditionalDependencies>nettle.lib;%(AdditionalDependencies)</AdditionalDependencies>
       <AdditionalOptions>/IGNORE:4006,4221,4078 %(AdditionalOptions)</AdditionalOptions>
     </Lib>
     <PostBuildEvent>
@@ -590,7 +590,7 @@ del /f /q $(OutDir)\licenses\nettle.txt
       <DisableSpecificWarnings>4146;4267;4028;4244;%(DisableSpecificWarnings)</DisableSpecificWarnings>
     </ClCompile>
     <Lib>
-      <AdditionalDependencies>libnettle.lib;%(AdditionalDependencies)</AdditionalDependencies>
+      <AdditionalDependencies>nettle.lib;%(AdditionalDependencies)</AdditionalDependencies>
       <AdditionalOptions>/IGNORE:4006,4221,4078 %(AdditionalOptions)</AdditionalOptions>
     </Lib>
     <PostBuildEvent>
@@ -820,7 +820,7 @@ del /f /q $(OutDir)\licenses\nettle.txt
     </ClCompile>
     <Link>
       <ModuleDefinitionFile>libhogweed.def</ModuleDefinitionFile>
-      <AdditionalDependencies>libnettle.lib;%(AdditionalDependencies)</AdditionalDependencies>
+      <AdditionalDependencies>nettle.lib;%(AdditionalDependencies)</AdditionalDependencies>
       <AdditionalOptions>/IGNORE:4006,4221,4078 %(AdditionalOptions)</AdditionalOptions>
     </Link>
     <PostBuildEvent>
@@ -1050,7 +1050,7 @@ del /f /q $(OutDir)\licenses\nettle.txt
     </ClCompile>
     <Link>
       <ModuleDefinitionFile>libhogweed.def</ModuleDefinitionFile>
-      <AdditionalDependencies>libnettle.lib;%(AdditionalDependencies)</AdditionalDependencies>
+      <AdditionalDependencies>nettle.lib;%(AdditionalDependencies)</AdditionalDependencies>
       <AdditionalOptions>/IGNORE:4006,4221,4078 %(AdditionalOptions)</AdditionalOptions>
     </Link>
     <PostBuildEvent>
diff --git a/SMP/libhogweed_winrt.vcxproj b/SMP/libhogweed_winrt.vcxproj
index 308bd0b..a436c69 100644
--- a/SMP/libhogweed_winrt.vcxproj
+++ b/SMP/libhogweed_winrt.vcxproj
@@ -18,7 +18,7 @@
       <DisableSpecificWarnings>4146;4267;4028;4244;%(DisableSpecificWarnings)</DisableSpecificWarnings>
     </ClCompile>
     <Lib>
-      <AdditionalDependencies>libnettled_winrt.lib;%(AdditionalDependencies)</AdditionalDependencies>
+      <AdditionalDependencies>nettled.lib;%(AdditionalDependencies)</AdditionalDependencies>
       <AdditionalOptions>/IGNORE:4006,4221,4078 %(AdditionalOptions)</AdditionalOptions>
     </Lib>
     <PostBuildEvent>
@@ -132,7 +132,7 @@ del /f /q $(OutDir)\licenses\nettle.txt
       <DisableSpecificWarnings>4146;4267;4028;4244;%(DisableSpecificWarnings)</DisableSpecificWarnings>
     </ClCompile>
     <Lib>
-      <AdditionalDependencies>libnettled_winrt.lib;%(AdditionalDependencies)</AdditionalDependencies>
+      <AdditionalDependencies>nettled.lib;%(AdditionalDependencies)</AdditionalDependencies>
       <AdditionalOptions>/IGNORE:4006,4221,4078 %(AdditionalOptions)</AdditionalOptions>
     </Lib>
     <PostBuildEvent>
@@ -247,7 +247,7 @@ del /f /q $(OutDir)\licenses\nettle.txt
     </ClCompile>
     <Link>
       <ModuleDefinitionFile>libhogweed.def</ModuleDefinitionFile>
-      <AdditionalDependencies>nettled_winrt.lib;gmp.lib;%(AdditionalDependencies)</AdditionalDependencies>
+      <AdditionalDependencies>nettled.lib;gmp.lib;%(AdditionalDependencies)</AdditionalDependencies>
       <AdditionalOptions>/IGNORE:4006,4221,4078 %(AdditionalOptions)</AdditionalOptions>
     </Link>
     <PostBuildEvent>
@@ -362,7 +362,7 @@ del /f /q $(OutDir)\licenses\nettle.txt
     </ClCompile>
     <Link>
       <ModuleDefinitionFile>libhogweed.def</ModuleDefinitionFile>
-      <AdditionalDependencies>nettled_winrt.lib;gmp.lib;%(AdditionalDependencies)</AdditionalDependencies>
+      <AdditionalDependencies>nettled.lib;gmp.lib;%(AdditionalDependencies)</AdditionalDependencies>
       <AdditionalOptions>/IGNORE:4006,4221,4078 %(AdditionalOptions)</AdditionalOptions>
     </Link>
     <PostBuildEvent>
@@ -476,7 +476,7 @@ del /f /q $(OutDir)\licenses\nettle.txt
       <DisableSpecificWarnings>4146;4267;4028;4244;%(DisableSpecificWarnings)</DisableSpecificWarnings>
     </ClCompile>
     <Lib>
-      <AdditionalDependencies>libnettle_winrt.lib;%(AdditionalDependencies)</AdditionalDependencies>
+      <AdditionalDependencies>nettle.lib;%(AdditionalDependencies)</AdditionalDependencies>
       <AdditionalOptions>/IGNORE:4006,4221,4078 %(AdditionalOptions)</AdditionalOptions>
     </Lib>
     <PostBuildEvent>
@@ -590,7 +590,7 @@ del /f /q $(OutDir)\licenses\nettle.txt
       <DisableSpecificWarnings>4146;4267;4028;4244;%(DisableSpecificWarnings)</DisableSpecificWarnings>
     </ClCompile>
     <Lib>
-      <AdditionalDependencies>libnettle_winrt.lib;%(AdditionalDependencies)</AdditionalDependencies>
+      <AdditionalDependencies>nettle.lib;%(AdditionalDependencies)</AdditionalDependencies>
       <AdditionalOptions>/IGNORE:4006,4221,4078 %(AdditionalOptions)</AdditionalOptions>
     </Lib>
     <PostBuildEvent>
@@ -705,7 +705,7 @@ del /f /q $(OutDir)\licenses\nettle.txt
     </ClCompile>
     <Link>
       <ModuleDefinitionFile>libhogweed.def</ModuleDefinitionFile>
-      <AdditionalDependencies>nettle_winrt.lib;gmp.lib;%(AdditionalDependencies)</AdditionalDependencies>
+      <AdditionalDependencies>nettle.lib;gmp.lib;%(AdditionalDependencies)</AdditionalDependencies>
       <AdditionalOptions>/IGNORE:4006,4221,4078 %(AdditionalOptions)</AdditionalOptions>
     </Link>
     <PostBuildEvent>
@@ -820,7 +820,7 @@ del /f /q $(OutDir)\licenses\nettle.txt
     </ClCompile>
     <Link>
       <ModuleDefinitionFile>libhogweed.def</ModuleDefinitionFile>
-      <AdditionalDependencies>libnettle_winrt.lib;%(AdditionalDependencies)</AdditionalDependencies>
+      <AdditionalDependencies>nettle.lib;%(AdditionalDependencies)</AdditionalDependencies>
       <AdditionalOptions>/IGNORE:4006,4221,4078 %(AdditionalOptions)</AdditionalOptions>
     </Link>
     <PostBuildEvent>
@@ -935,7 +935,7 @@ del /f /q $(OutDir)\licenses\nettle.txt
     </ClCompile>
     <Link>
       <ModuleDefinitionFile>libhogweed.def</ModuleDefinitionFile>
-      <AdditionalDependencies>nettle_winrt.lib;gmp.lib;%(AdditionalDependencies)</AdditionalDependencies>
+      <AdditionalDependencies>nettle.lib;gmp.lib;%(AdditionalDependencies)</AdditionalDependencies>
       <AdditionalOptions>/IGNORE:4006,4221,4078 %(AdditionalOptions)</AdditionalOptions>
     </Link>
     <PostBuildEvent>
@@ -1050,7 +1050,7 @@ del /f /q $(OutDir)\licenses\nettle.txt
     </ClCompile>
     <Link>
       <ModuleDefinitionFile>libhogweed.def</ModuleDefinitionFile>
-      <AdditionalDependencies>libnettle_winrt.lib;%(AdditionalDependencies)</AdditionalDependencies>
+      <AdditionalDependencies>nettle.lib;%(AdditionalDependencies)</AdditionalDependencies>
       <AdditionalOptions>/IGNORE:4006,4221,4078 %(AdditionalOptions)</AdditionalOptions>
     </Link>
     <PostBuildEvent>
diff --git a/SMP/smp_deps.props b/SMP/smp_deps.props
index 487099d..1eade47 100644
--- a/SMP/smp_deps.props
+++ b/SMP/smp_deps.props
@@ -104,16 +104,16 @@
   </ImportGroup>
   <PropertyGroup Label="UserMacros" />
   <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'">
-    <TargetName>lib$(RootNamespace)d</TargetName>
-    <OutDir>$(ProjectDir)..\..\..\msvc\</OutDir>
+    <TargetName>$(RootNamespace)d</TargetName>
+    <OutDir>$(ProjectDir)..\msvc\</OutDir>
     <IntDir>$(ProjectDir)obj\$(Configuration)\$(Platform)\$(ProjectName)\</IntDir>
     <GeneratedFilesDir>$(ProjectDir)obj\Generated</GeneratedFilesDir>
     <CustomBuildAfterTargets>Clean</CustomBuildAfterTargets>
     <MSBuildWarningsAsMessages>MSB8012</MSBuildWarningsAsMessages>
   </PropertyGroup>
   <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Debug|x64'">
-    <TargetName>lib$(RootNamespace)d</TargetName>
-    <OutDir>$(ProjectDir)..\..\..\msvc\</OutDir>
+    <TargetName>$(RootNamespace)d</TargetName>
+    <OutDir>$(ProjectDir)..\msvc\</OutDir>
     <IntDir>$(ProjectDir)obj\$(Configuration)\$(Platform)\$(ProjectName)\</IntDir>
     <GeneratedFilesDir>$(ProjectDir)obj\Generated</GeneratedFilesDir>
     <CustomBuildAfterTargets>Clean</CustomBuildAfterTargets>
@@ -121,7 +121,7 @@
   </PropertyGroup>
   <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='DebugDLL|Win32'">
     <TargetName>$(RootNamespace)d</TargetName>
-    <OutDir>$(ProjectDir)..\..\..\msvc\</OutDir>
+    <OutDir>$(ProjectDir)..\msvc\</OutDir>
     <IntDir>$(ProjectDir)obj\$(Configuration)\$(Platform)\$(ProjectName)\</IntDir>
     <GeneratedFilesDir>$(ProjectDir)obj\Generated</GeneratedFilesDir>
     <CustomBuildAfterTargets>Clean</CustomBuildAfterTargets>
@@ -129,23 +129,23 @@
   </PropertyGroup>
   <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='DebugDLL|x64'">
     <TargetName>$(RootNamespace)d</TargetName>
-    <OutDir>$(ProjectDir)..\..\..\msvc\</OutDir>
+    <OutDir>$(ProjectDir)..\msvc\</OutDir>
     <IntDir>$(ProjectDir)obj\$(Configuration)\$(Platform)\$(ProjectName)\</IntDir>
     <GeneratedFilesDir>$(ProjectDir)obj\Generated</GeneratedFilesDir>
     <CustomBuildAfterTargets>Clean</CustomBuildAfterTargets>
     <MSBuildWarningsAsMessages>MSB8012</MSBuildWarningsAsMessages>
   </PropertyGroup>
   <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Release|Win32'">
-    <TargetName>lib$(RootNamespace)</TargetName>
-    <OutDir>$(ProjectDir)..\..\..\msvc\</OutDir>
+    <TargetName>$(RootNamespace)</TargetName>
+    <OutDir>$(ProjectDir)..\msvc\</OutDir>
     <IntDir>$(ProjectDir)obj\$(Configuration)\$(Platform)\$(ProjectName)\</IntDir>
     <GeneratedFilesDir>$(ProjectDir)obj\Generated</GeneratedFilesDir>
     <CustomBuildAfterTargets>Clean</CustomBuildAfterTargets>
     <MSBuildWarningsAsMessages>MSB8012</MSBuildWarningsAsMessages>
   </PropertyGroup>
   <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Release|x64'">
-    <TargetName>lib$(RootNamespace)</TargetName>
-    <OutDir>$(ProjectDir)..\..\..\msvc\</OutDir>
+    <TargetName>$(RootNamespace)</TargetName>
+    <OutDir>$(ProjectDir)..\msvc\</OutDir>
     <IntDir>$(ProjectDir)obj\$(Configuration)\$(Platform)\$(ProjectName)\</IntDir>
     <GeneratedFilesDir>$(ProjectDir)obj\Generated</GeneratedFilesDir>
     <CustomBuildAfterTargets>Clean</CustomBuildAfterTargets>
@@ -153,7 +153,7 @@
   </PropertyGroup>
   <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='ReleaseDLL|Win32'">
     <TargetName>$(RootNamespace)</TargetName>
-    <OutDir>$(ProjectDir)..\..\..\msvc\</OutDir>
+    <OutDir>$(ProjectDir)..\msvc\</OutDir>
     <IntDir>$(ProjectDir)obj\$(Configuration)\$(Platform)\$(ProjectName)\</IntDir>
     <GeneratedFilesDir>$(ProjectDir)obj\Generated</GeneratedFilesDir>
     <CustomBuildAfterTargets>Clean</CustomBuildAfterTargets>
@@ -161,7 +161,7 @@
   </PropertyGroup>
   <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='ReleaseDLL|x64'">
     <TargetName>$(RootNamespace)</TargetName>
-    <OutDir>$(ProjectDir)..\..\..\msvc\</OutDir>
+    <OutDir>$(ProjectDir)..\msvc\</OutDir>
     <IntDir>$(ProjectDir)obj\$(Configuration)\$(Platform)\$(ProjectName)\</IntDir>
     <GeneratedFilesDir>$(ProjectDir)obj\Generated</GeneratedFilesDir>
     <CustomBuildAfterTargets>Clean</CustomBuildAfterTargets>
@@ -169,7 +169,7 @@
   </PropertyGroup>
   <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='ReleaseDLLStaticDeps|Win32'">
     <TargetName>$(RootNamespace)</TargetName>
-    <OutDir>$(ProjectDir)..\..\..\msvc\</OutDir>
+    <OutDir>$(ProjectDir)..\msvc\</OutDir>
     <IntDir>$(ProjectDir)obj\$(Configuration)\$(Platform)\$(ProjectName)\</IntDir>
     <GeneratedFilesDir>$(ProjectDir)obj\Generated</GeneratedFilesDir>
     <CustomBuildAfterTargets>Clean</CustomBuildAfterTargets>
@@ -177,7 +177,7 @@
   </PropertyGroup>
   <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='ReleaseDLLStaticDeps|x64'">
     <TargetName>$(RootNamespace)</TargetName>
-    <OutDir>$(ProjectDir)..\..\..\msvc\</OutDir>
+    <OutDir>$(ProjectDir)..\msvc\</OutDir>
     <IntDir>$(ProjectDir)obj\$(Configuration)\$(Platform)\$(ProjectName)\</IntDir>
     <GeneratedFilesDir>$(ProjectDir)obj\Generated</GeneratedFilesDir>
     <CustomBuildAfterTargets>Clean</CustomBuildAfterTargets>
diff --git a/SMP/smp_winrt_deps.props b/SMP/smp_winrt_deps.props
index d44408a..b44482c 100644
--- a/SMP/smp_winrt_deps.props
+++ b/SMP/smp_winrt_deps.props
@@ -115,80 +115,80 @@
   </ImportGroup>
   <PropertyGroup Label="UserMacros" />
   <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='DebugWinRT|Win32'">
-    <TargetName>lib$(RootNamespace)d_winrt</TargetName>
-    <OutDir>$(ProjectDir)..\..\..\msvc\</OutDir>
+    <TargetName>$(RootNamespace)d</TargetName>
+    <OutDir>$(ProjectDir)..\msvc\</OutDir>
     <IntDir>$(ProjectDir)obj\$(Configuration)\$(Platform)\$(ProjectName)\</IntDir>
     <GeneratedFilesDir>$(ProjectDir)obj\Generated</GeneratedFilesDir>
     <CustomBuildAfterTargets>Clean</CustomBuildAfterTargets>
     <MSBuildWarningsAsMessages>MSB8012</MSBuildWarningsAsMessages>
   </PropertyGroup>
   <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='DebugWinRT|x64'">
-    <TargetName>lib$(RootNamespace)d_winrt</TargetName>
-    <OutDir>$(ProjectDir)..\..\..\msvc\</OutDir>
+    <TargetName>$(RootNamespace)d</TargetName>
+    <OutDir>$(ProjectDir)..\msvc\</OutDir>
     <IntDir>$(ProjectDir)obj\$(Configuration)\$(Platform)\$(ProjectName)\</IntDir>
     <GeneratedFilesDir>$(ProjectDir)obj\Generated</GeneratedFilesDir>
     <CustomBuildAfterTargets>Clean</CustomBuildAfterTargets>
     <MSBuildWarningsAsMessages>MSB8012</MSBuildWarningsAsMessages>
   </PropertyGroup>
   <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='DebugDLLWinRT|Win32'">
-    <TargetName>$(RootNamespace)d_winrt</TargetName>
-    <OutDir>$(ProjectDir)..\..\..\msvc\</OutDir>
+    <TargetName>$(RootNamespace)d</TargetName>
+    <OutDir>$(ProjectDir)..\msvc\</OutDir>
     <IntDir>$(ProjectDir)obj\$(Configuration)\$(Platform)\$(ProjectName)\</IntDir>
     <GeneratedFilesDir>$(ProjectDir)obj\Generated</GeneratedFilesDir>
     <CustomBuildAfterTargets>Clean</CustomBuildAfterTargets>
     <MSBuildWarningsAsMessages>MSB8012</MSBuildWarningsAsMessages>
   </PropertyGroup>
   <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='DebugDLLWinRT|x64'">
-    <TargetName>$(RootNamespace)d_winrt</TargetName>
-    <OutDir>$(ProjectDir)..\..\..\msvc\</OutDir>
+    <TargetName>$(RootNamespace)d</TargetName>
+    <OutDir>$(ProjectDir)..\msvc\</OutDir>
     <IntDir>$(ProjectDir)obj\$(Configuration)\$(Platform)\$(ProjectName)\</IntDir>
     <GeneratedFilesDir>$(ProjectDir)obj\Generated</GeneratedFilesDir>
     <CustomBuildAfterTargets>Clean</CustomBuildAfterTargets>
     <MSBuildWarningsAsMessages>MSB8012</MSBuildWarningsAsMessages>
   </PropertyGroup>
   <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='ReleaseWinRT|Win32'">
-    <TargetName>lib$(RootNamespace)_winrt</TargetName>
-    <OutDir>$(ProjectDir)..\..\..\msvc\</OutDir>
+    <TargetName>$(RootNamespace)</TargetName>
+    <OutDir>$(ProjectDir)..\msvc\</OutDir>
     <IntDir>$(ProjectDir)obj\$(Configuration)\$(Platform)\$(ProjectName)\</IntDir>
     <GeneratedFilesDir>$(ProjectDir)obj\Generated</GeneratedFilesDir>
     <CustomBuildAfterTargets>Clean</CustomBuildAfterTargets>
     <MSBuildWarningsAsMessages>MSB8012</MSBuildWarningsAsMessages>
   </PropertyGroup>
   <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='ReleaseWinRT|x64'">
-    <TargetName>lib$(RootNamespace)_winrt</TargetName>
-    <OutDir>$(ProjectDir)..\..\..\msvc\</OutDir>
+    <TargetName>$(RootNamespace)</TargetName>
+    <OutDir>$(ProjectDir)..\msvc\</OutDir>
     <IntDir>$(ProjectDir)obj\$(Configuration)\$(Platform)\$(ProjectName)\</IntDir>
     <GeneratedFilesDir>$(ProjectDir)obj\Generated</GeneratedFilesDir>
     <CustomBuildAfterTargets>Clean</CustomBuildAfterTargets>
     <MSBuildWarningsAsMessages>MSB8012</MSBuildWarningsAsMessages>
   </PropertyGroup>
   <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='ReleaseDLLWinRT|Win32'">
-    <TargetName>$(RootNamespace)_winrt</TargetName>
-    <OutDir>$(ProjectDir)..\..\..\msvc\</OutDir>
+    <TargetName>$(RootNamespace)</TargetName>
+    <OutDir>$(ProjectDir)..\msvc\</OutDir>
     <IntDir>$(ProjectDir)obj\$(Configuration)\$(Platform)\$(ProjectName)\</IntDir>
     <GeneratedFilesDir>$(ProjectDir)obj\Generated</GeneratedFilesDir>
     <CustomBuildAfterTargets>Clean</CustomBuildAfterTargets>
     <MSBuildWarningsAsMessages>MSB8012</MSBuildWarningsAsMessages>
   </PropertyGroup>
   <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='ReleaseDLLWinRT|x64'">
-    <TargetName>$(RootNamespace)_winrt</TargetName>
-    <OutDir>$(ProjectDir)..\..\..\msvc\</OutDir>
+    <TargetName>$(RootNamespace)</TargetName>
+    <OutDir>$(ProjectDir)..\msvc\</OutDir>
     <IntDir>$(ProjectDir)obj\$(Configuration)\$(Platform)\$(ProjectName)\</IntDir>
     <GeneratedFilesDir>$(ProjectDir)obj\Generated</GeneratedFilesDir>
     <CustomBuildAfterTargets>Clean</CustomBuildAfterTargets>
     <MSBuildWarningsAsMessages>MSB8012</MSBuildWarningsAsMessages>
   </PropertyGroup>
   <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='ReleaseDLLWinRTStaticDeps|Win32'">
-    <TargetName>$(RootNamespace)_winrt</TargetName>
-    <OutDir>$(ProjectDir)..\..\..\msvc\</OutDir>
+    <TargetName>$(RootNamespace)</TargetName>
+    <OutDir>$(ProjectDir)..\msvc\</OutDir>
     <IntDir>$(ProjectDir)obj\$(Configuration)\$(Platform)\$(ProjectName)\</IntDir>
     <GeneratedFilesDir>$(ProjectDir)obj\Generated</GeneratedFilesDir>
     <CustomBuildAfterTargets>Clean</CustomBuildAfterTargets>
     <MSBuildWarningsAsMessages>MSB8012</MSBuildWarningsAsMessages>
   </PropertyGroup>
   <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='ReleaseDLLWinRTStaticDeps|x64'">
-    <TargetName>$(RootNamespace)_winrt</TargetName>
-    <OutDir>$(ProjectDir)..\..\..\msvc\</OutDir>
+    <TargetName>$(RootNamespace)</TargetName>
+    <OutDir>$(ProjectDir)..\msvc\</OutDir>
     <IntDir>$(ProjectDir)obj\$(Configuration)\$(Platform)\$(ProjectName)\</IntDir>
     <GeneratedFilesDir>$(ProjectDir)obj\Generated</GeneratedFilesDir>
     <CustomBuildAfterTargets>Clean</CustomBuildAfterTargets>
diff --git a/hogweed.pc.in b/hogweed.pc.in
index 97fb9d4..ce977c0 100644
--- a/hogweed.pc.in
+++ b/hogweed.pc.in
@@ -13,7 +13,7 @@ URL: http://www.lysator.liu.se/~nisse/nettle
 Version: @PACKAGE_VERSION@
 Requires: @IF_NOT_SHARED@ nettle
 Requires.private: @IF_SHARED@ nettle
-Libs: -L${libdir} -lhogweed @IF_NOT_SHARED@ @LIBS@
+Libs: -L${libdir} @HOGWEED@ @IF_NOT_SHARED@ @LIBS@
 Libs.private: @IF_SHARED@ @LIBS@
 Cflags: -I${includedir}
 
diff --git a/nettle.pc.in b/nettle.pc.in
index eb0020c..6e3ed1e 100644
--- a/nettle.pc.in
+++ b/nettle.pc.in
@@ -7,5 +7,6 @@ Name: Nettle
 Description: Nettle low-level cryptographic library (symmetric algorithms)
 URL: http://www.lysator.liu.se/~nisse/nettle
 Version: @PACKAGE_VERSION@
-Libs: -L${libdir} -lnettle
+Requires.private: gmp
+Libs: -L${libdir} @LIBS@
 Cflags: -I${includedir}
