diff --git a/cmake/helpers/GdalGenerateConfig.cmake b/cmake/helpers/GdalGenerateConfig.cmake
index a2e9dfc..46ac413 100644
--- a/cmake/helpers/GdalGenerateConfig.cmake
+++ b/cmake/helpers/GdalGenerateConfig.cmake
@@ -176,14 +176,15 @@ function(gdal_split_library_to_lflags _lib_flag _path_flag _input)
             string(FIND "${_name_we}" "${_prefix}" _pos)
         else()
             set(_pos 0)
+            set(_name_we "${_lib_name}")
         endif()
         if(_pos STREQUAL "0")
             # Match
             string(LENGTH "${_prefix}" _pos)
             string(SUBSTRING "${_name_we}" "${_pos}" "-1" _lib_name)
-            set(${_lib_flag} "${CMAKE_LINK_LIBRARY_FLAG}${_lib_name}" PARENT_SCOPE)
+            set(${_lib_flag} "-l${_lib_name}" PARENT_SCOPE)
             if(_lib_dir AND NOT _lib_dir IN_LIST CMAKE_C_IMPLICIT_LINK_DIRECTORIES)
-                set(${_path_flag} "${CMAKE_LIBRARY_PATH_FLAG}${_lib_dir}" PARENT_SCOPE)
+                set(${_path_flag} "-L${_lib_dir}" PARENT_SCOPE)
             else()
                 set(${_path_flag} "" PARENT_SCOPE)
             endif()
@@ -203,6 +204,15 @@ function(gdal_get_lflags _result)
     while(_libs_in)
         list(GET _libs_in 0 _lib)
         list(REMOVE_AT _libs_in 0)
+        if(_lib MATCHES "^-framework ([^ ]+)\$")
+            list(APPEND _libs_out "-framework" "${CMAKE_MATCH_1}")
+            continue()
+        elseif(_lib STREQUAL "-framework")
+            list(GET _libs_in 0 _lib)
+            list(REMOVE_AT _libs_in 0)
+            list(APPEND _libs_out "-framework" "${_lib}")
+            continue()
+        endif()
         if(TARGET "${_lib}")
             get_property(_type TARGET ${_lib} PROPERTY TYPE)
             if(_type STREQUAL "INTERFACE_LIBRARY")
@@ -232,7 +242,7 @@ function(gdal_get_lflags _result)
                 gdal_split_library_to_lflags(_lib _other "${_lib}")
             endif()
         else()
-            set(_lib "${CMAKE_LINK_LIBRARY_FLAG}${_lib}")
+            set(_lib "-l${_lib}")
         endif()
         if(_other AND NOT _other IN_LIST _libs_out)
             list(APPEND _libs_out "${_other}")
@@ -270,7 +280,11 @@ function(gdal_generate_config)
     gdal_join_and_quote(CONFIG_CFLAGS)
 
     get_property(target_lib_name TARGET "${arg_TARGET}" PROPERTY OUTPUT_NAME)
-    set(CONFIG_LIBS "${CMAKE_LINK_LIBRARY_FLAG}${target_lib_name}")
+    # Keep in sync with /gdal.cmake
+    if(MSVC AND arg_TARGET STREQUAL "GDAL" AND CMAKE_BUILD_TYPE MATCHES "[Dd][Ee][Bb][Uu][Gg]")
+        string(APPEND target_lib_name "${GDAL_DEBUG_POSTFIX}")
+    endif()
+    set(CONFIG_LIBS "-l${target_lib_name}")
     if(NOT CONFIG_PREFIX IN_LIST CMAKE_C_IMPLICIT_LINK_LIBRARIES)
         list(INSERT CONFIG_LIBS 0 "${CMAKE_LIBRARY_PATH_FLAG}${CMAKE_INSTALL_FULL_LIBDIR}")
     endif()
