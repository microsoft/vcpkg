diff --git a/CMake/GeneratePkgConfig.cmake b/CMake/GeneratePkgConfig.cmake
index 3d3fa01d1..9b0b08ebc 100644
--- a/CMake/GeneratePkgConfig.cmake
+++ b/CMake/GeneratePkgConfig.cmake
@@ -31,17 +31,72 @@ function(generate_pkgconfig TARGET DESCRIPTION)
   # message("Generating pkg-config for ${TARGET}")
   get_filename_component(PREFIX "${CMAKE_INSTALL_PREFIX}" REALPATH)
 
-  get_target_property(LIST "${TARGET}" LINK_LIBRARIES)
+  # Get the target type to handle interface libraries differently
+  get_target_property(LIBRARY_TYPE "${TARGET}" TYPE)
+  
+  # For interface libraries, use INTERFACE_LINK_LIBRARIES instead of LINK_LIBRARIES
+  if ("${LIBRARY_TYPE}" STREQUAL "INTERFACE_LIBRARY")
+    get_target_property(LIST "${TARGET}" INTERFACE_LINK_LIBRARIES)
+  else()
+    get_target_property(LIST "${TARGET}" LINK_LIBRARIES)
+  endif()
+  
+  # Handle the case when no libraries are found
+  if ("${LIST}" STREQUAL "LIST-NOTFOUND")
+    set(LIST "")
+  endif()
+  
+  # Special handling for tdcore interface library
+  if ("${TARGET}" STREQUAL "tdcore" AND "${LIBRARY_TYPE}" STREQUAL "INTERFACE_LIBRARY")
+    # For tdcore interface library, collect dependencies from the parts instead
+    set(COMBINED_REQS "")
+    set(COMBINED_LIBS "")
+    
+    foreach (PART_LIB ${LIST})
+      if (TARGET "${PART_LIB}" AND "${PART_LIB}" MATCHES "^tdcore_part[0-9]+$")
+        get_target_property(PART_LIST "${PART_LIB}" LINK_LIBRARIES)
+        if (NOT "${PART_LIST}" STREQUAL "PART_LIST-NOTFOUND")
+          foreach (PART_DEP ${PART_LIST})
+            if (TARGET "${PART_DEP}")
+              list(APPEND COMBINED_REQS "${PART_DEP}")
+            else()
+              list(APPEND COMBINED_LIBS "${PART_DEP}")
+            endif()
+          endforeach()
+        endif()
+      elseif (TARGET "${PART_LIB}")
+        list(APPEND COMBINED_REQS "${PART_LIB}")
+      else()
+        list(APPEND COMBINED_LIBS "${PART_LIB}")
+      endif()
+    endforeach()
+    
+    # Remove duplicates
+    if (COMBINED_REQS)
+      list(REMOVE_DUPLICATES COMBINED_REQS)
+    endif()
+    if (COMBINED_LIBS)
+      list(REMOVE_DUPLICATES COMBINED_LIBS)
+    endif()
+    
+    set(LIST "")
+    list(APPEND LIST ${COMBINED_REQS})
+    list(APPEND LIST ${COMBINED_LIBS})
+  endif()
+  
   set(REQS "")
   set(LIBS "")
   foreach (LIB ${LIST})
     if (TARGET "${LIB}")
-      set(HAS_REQS 1)
-      list(APPEND REQS "${LIB}")
+      # Skip internal tdcore parts as they don't have their own .pc files
+      if (NOT "${LIB}" MATCHES "^tdcore_part[0-9]+$")
+        set(HAS_REQS 1)
+        list(APPEND REQS "${LIB}")
+      endif()
     else()
       set(HAS_LIBS 1)
       get_relative_link(LINK "${LIB}")
-      if (NOT LINK EQUAL "")
+      if (NOT "${LINK}" STREQUAL "")
         list(APPEND LIBS "${LINK}")
       endif()
     endif()
@@ -88,11 +143,11 @@ CFlags: -I\"${PKGCONFIG_INCLUDEDIR}\"
 Libs: -L\"${PKGCONFIG_LIBDIR}\" -l${TARGET}
 ${REQUIRES}${LIBRARIES}")
 
-  get_target_property(LIBRARY_TYPE "${TARGET}" TYPE)
-  if (LIBRARY_TYPE STREQUAL "STATIC_LIBRARY" OR LIBRARY_TYPE STREQUAL "SHARED_LIBRARY")
+  if ("${LIBRARY_TYPE}" STREQUAL "STATIC_LIBRARY" OR "${LIBRARY_TYPE}" STREQUAL "SHARED_LIBRARY")
+    install(FILES "${CMAKE_CURRENT_BINARY_DIR}/pkgconfig/${TARGET}.pc" DESTINATION "${CMAKE_INSTALL_LIBDIR}/pkgconfig")
+  elseif ("${LIBRARY_TYPE}" STREQUAL "INTERFACE_LIBRARY")
+    # Interface libraries are also supported, install the .pc file
     install(FILES "${CMAKE_CURRENT_BINARY_DIR}/pkgconfig/${TARGET}.pc" DESTINATION "${CMAKE_INSTALL_LIBDIR}/pkgconfig")
-  elseif (LIBRARY_TYPE STREQUAL "INTERFACE_LIBRARY")
-    # TODO: support interface libraries
   else()
     message(FATAL_ERROR "Don't know how to handle ${TARGET} of type ${LIBRARY_TYPE}")
   endif()
