set(program_name patchelf)
if(CMAKE_HOST_SYSTEM_NAME STREQUAL "Linux")
    set(program_version 0.18.0)
    vcpkg_execute_in_download_mode(COMMAND "uname" "-m" OUTPUT_VARIABLE HOST_ARCH OUTPUT_STRIP_TRAILING_WHITESPACE)
    if(HOST_ARCH STREQUAL "aarch64")
        set(patchelf_platform "aarch64")
        set(download_sha512 "c7b944f92b55605f5e405c5687364a0f4bcdee5cdf62aaf213bc217295db94a4d2b19688334234b2a1de24f7b60c056ab302fbb1fccf6c13a8e51cbd054cdfd1")
    elseif(HOST_ARCH STREQUAL "armv7l")
        set(patchelf_platform "armv7l")
        set(download_sha512 "4ce66fd5242bcbd947c10ff678385c13fef15c340698f0c30dc7cdbd96bbc99627533eda9904369be1f7516f12ac1b7a608c63d2e48ef3c919a640286350957d")
    else()
        set(patchelf_platform "x86_64")
        set(download_sha512 "5db1fe6b969ceae862cbc4f10d0e953250d646ae91b869a6d5529dbeacd62c1f8402f12c5aaba6cb6325688b325637ef0191fd798972dd3a00f65262f12bb5f2")
    endif()
    set(download_filename "${program_name}-${program_version}-${patchelf_platform}.tar.gz")
    set(download_urls "https://github.com/NixOS/patchelf/releases/download/${program_version}/${download_filename}")
    set(tool_subdirectory "${program_version}-${patchelf_platform}-linux")
    set(paths_to_search "${DOWNLOADS}/tools/patchelf/${program_version}-${patchelf_platform}-linux/bin")
elseif(CMAKE_HOST_SYSTEM_NAME STREQUAL "Windows")
    set(patchelf_host "win32")
    set(program_version 0.18.0)
    set(download_sha512
"19d24f64bea6d6236292455a09695d289ddca71433a0ccaf372f57da80a4cde5db1c375ac8e29a41ac1f0676b7d3b56ce5b2baf39e58369c4f741b612db51044")
    set(download_filename "${program_name}-${patchelf_host}-${program_version}.exe")
    set(download_urls "https://github.com/NixOS/patchelf/releases/download/${program_version}/${download_filename}")
    set(tool_subdirectory "${program_version}-${patchelf_host}")
    set(paths_to_search "${DOWNLOADS}/tools/patchelf/${program_version}-${patchelf_host}/")
    set(raw_executable ON)
    set(rename_binary_to "patchelf.exe")
endif()
